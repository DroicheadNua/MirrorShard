■トラブルシューティング & FAQ  

Q. キーボードショートカットの操作がよくわかりません。  

A. F1キーを押してください。ショートカット一覧が表示されます。  


Q. テキストファイルが開けません。  

A. ファイルが壊れている、など他にも原因は考えられますが、おそらく一番多い事例は「サブウィンドウ（プレビュー、アイデアプロセッサなど）が開いている」だと思われます。  
　本アプリの仕様上、サブウィンドウが開いている間はテキストファイルの読み込みができません。  
　わかりにくくて申し訳ございませんが、万一の誤作動を防ぐためにこうした仕様になっております。ご了承くださいますようお願い申し上げます。  

Q. Mac版が起動できません。「"MirrorShard"は壊れているため開けません。」などと表示されます。  

A. 私がAppleに開発者登録していないため、MirrorShardが野良アプリとしてmacOSのセキュリティ機能（Gatekeeper）にブロックされてしまっていることによって生じた状態です。  
　対処法は以下のようになります。  

方法1：「システム設定」から手動で許可する（推奨）  

(お使いのmacOSのバージョンによっては、この方法が機能しない場合があります)  

    アプリケーションフォルダのMirrorShard.appをダブルクリックし、エラーが表示されたら「OK」を押します。  
    Appleメニュー > 「システム設定」>「プライバシーとセキュリティ」を開きます。  
    「セキュリティ」の項目に表示される「お使いのMacを保護するために"MirrorShard"がブロックされました。」というメッセージの横の「このまま開く」ボタンをクリックします。  

アプリはセキュリティ設定の例外として保存され、今後は承認済みのアプリの場合と同様に、ダブルクリックして開くことができるようになります。  

方法2：ターミナルを使って、手動で「検疫」を解除する（より確実）  

上記の方法で「このまま開く」ボタンが表示されない場合、あるいは「お使いのMacを保護するために〜」自体が表示されない場合は、以下の手順をお試しください。これは、macOSがダウンロード時にファイルへ付ける「検疫済」の印を、手動で取り除く安全な方法です。  

    ターミナルを起動します。  
        (アプリケーションフォルダ > ユーティリティフォルダの中にあります)  

    ターミナルに、以下のコマンドを入力します。（まだEnterキーは押さないでください）  

    xattr -d com.apple.quarantine 

(※ quarantine の後に、半角スペースが一つ入っていることを確認してください)  

アプリケーションフォルダを開き、MirrorShard.appのアイコンを、ターミナルのウィンドウの上にドラッグ＆ドロップします。  

    すると、コマンドの末尾に、MirrorShard.appへの正しいパスが自動的に入力されます。最終的なコマンドは、以下のようになります。  

    xattr -d com.apple.quarantine /Applications/MirrorShard.app

    Enterキーを押して、コマンドを実行します。  
        （何もメッセージが表示されなければ、成功です）  

    これで、MirrorShard.appは、通常通りダブルクリックで起動できるようになります。  

お手数ですが、上記の方法をお試しいただければ幸いです。  


Q. 背景画像やBGM、カスタムフォントが正しく表示/再生されません。  

A. MirrorShardは、初回起動時に必要な素材ファイルを、お使いのPCのユーザー設定フォルダ内に自動でコピーします。何らかの理由でこのコピーがうまくいかなかった場合、以下の手順で手動でリセットすることができます。  

1. アプリ内のメニューボタンから「素材フォルダを開く (またはCtrl+Shift+J)」を実行します。  
2. １階層上に移動し、resourcesフォルダ（先程開いたフォルダ）をまるごと削除してください。
3. MirrorShardを再起動します。  

再起動時に、素材ファイルが再びクリーンな状態でコピーされます。このときresourcesフォルダが残っていると、素材のコピーが行われません。  


Q. エクスポートされていない部分があるような……  

A. 本作のエクスポート機能は、エディタ上の情報ではなく、編集中のファイルそのものを別形式にコンバートする形で実装しています。  
　ですので、未保存の原稿をエクスポートした場合、保存されていない部分はエクスポートに反映されません。先に保存してからエクスポートするようにしてください。  


Q. アンインストールしても、設定ファイルが残っているようです。  

A. アンインストーラーは、あなたがカスタマイズした素材ファイルや設定（history.jsonなど）を、誤って削除してしまわないように、意図的にユーザー設定フォルダを残す仕様になっています。  
もし、すべての設定を完全に削除したい場合は、アンインストール後に、以下のフォルダを手動で削除してください。  

Windows: C:\Users\<あなたのユーザー名  >\AppData\Roaming\MirrorShard  
macOS: ~/Library/Application Support/MirrorShard  
Linux: ~/.config/MirrorShard  


Q. 文字化けしています。  

A. 本エディタでは扱えないファイルの可能性があります。「エンコードについて」の項目を御覧ください。  


Q. EPUBやPDFでエクスポートするときに、「Unknown option --embed resources」というエラーが出てエクスポートできません。  

A. Pandocのバージョンが古いと出るエラーです。公式サイトから最新のPandocを入手してください。詳しくは同梱の「エクスポート機能導入ガイド」を御覧ください。  


Q. 「高度な設定」ウィンドウが閉じられなくなりました。閉じるボタンもCtrl+Eキーも効きません。  

A. Windowsで他ソフトウェアの自動アップデートと干渉した際などに、稀に起きる現象です。「高度な設定」ウィンドウを右クリックして、出てきたメニューから「閉じる」を選んでみてください。  


Q. UIのアイコンが四角（□）で表示されています。  

A. 一部のLinuxディストリビューション（特に軽量なもの）などでは、絵文字を表示するためのフォントが、デフォルトでインストールされていないことがあります。  
この問題を解決するには、ターミナルを開き、以下のコマンドを実行して、Googleが提供する標準的な絵文字フォント**「Noto Color Emoji」**をインストールしてください。  

*   **Debian / Ubuntu / Zorin / Mint系の場合:**
    ```bash
    sudo apt update
    sudo apt install fonts-noto-color-emoji
    ```

インストール後、`MirrorShard`を再起動すれば、アイコンが正しく表示されるようになります。  


Q. ショートカットキーが競合します。  

A. MirrorShardは快適な操作のために多くのショートカットを提供していますが、一部のLinuxディストリビューションやデスクトップ環境においては、OSの標準機能とショートカットが競合する場合があります（例: Ctrl+Shift+Mが拡大鏡ツールを起動する、Ctrl+Hが効かないなど）。  
この場合、大変お手数ですが、OS側のショートカット設定を変更していただくか、アプリ上部のUIボタンから該当の機能をご利用ください。  


Q. クラウド保存や、複数PCでのデータ同期はできますか？  

A. MirrorShard自体には、特定のクラウドサービスと連携する機能はありません。しかし、多くのクラウドストレージサービスと組み合わせてご利用いただけます。  
簡単な方法:  
作成したファイルを、お使いのPCにインストールされている iCloud Drive, Google Drive, OneDrive などの同期フォルダ内に保存してください。これにより、ファイルは自動的にクラウドにバックアップされ、同じサービスを使っている他のPCとも同期されます。  
より高度な方法（上級者向け）:  
GitHub Desktop のようなバージョン管理ツールを使うと、クラウドへのバックアップに加えて、「変更履歴の保存（いつでも過去の状態に戻せる）」や、より確実な複数端末での同期が可能になります。  
導入には専門的な知識が必要なため、ご興味がおありの場合は解説サイトを検索したり、AI（ChatGPT、Google Geminiなど）に手順を尋ねてみたりすることをお勧めします。  


Q. ファイルを開いたら、身に覚えのない``という文字が表示されました。これは何ですか？  

A. これは、一部の古いワープロソフトなどが作る「改ページ」を意味する特殊な制御文字です。MirrorShardでは、文字化けを防ぎ、不可視の文字を分かりやすく表示するために、これを``という記号に置き換えて表示しています。
この``という文字列は、ファイルを上書き保存する際には元の制御文字として再変換されるため、ファイルの内容が意図せず変更されることはありません。不要であれば、エディタ上で``を削除していただくことで、制御文字もファイルから削除されます。  


Q. ファイルを上書き保存すると、ファイルの「作成日時」が「更新日時」と同じになってしまいます。これは仕様ですか？  

A. はい、これはMirrorShardが採用している安全な保存機能（アトミックセーブ）による仕様です。  
【なぜこのようになるのか？】  
MirrorShardは、ユーザーの大切なデータを不慮の事故から守ることを最優先に設計されています。そのため、ファイルを上書き保存する際、内部的には以下のような手順を踏んでいます。  
　１）まず、書き込む内容を全く別の一時ファイルとして完全に保存します。  
　２）一時ファイルへの書き込みが成功したことを確認してから、その一時ファイルを元のファイルにリネーム（置き換え）します。  
この方式により、もし保存の瞬間にPCがクラッシュしたり、停電が起きたりしても、元のファイルが破損したり、内容が消えてしまったりといった最悪の事態を防ぐことができます。  
【作成日時への影響について】  
この「リネームによる置き換え」という手法の特性上、OSはこれを「新しいファイルが作成された」と認識するため、ファイルの「作成日時」が更新されてしまいます。  
これは、ユーザーのデータの安全性を最大限に確保するためのトレードオフであることを、何卒ご理解いただけますと幸いです。  


Q. もし、ファイルの作成日時をどうしても維持したいファイルがある場合は？  

A. お手数ですが、MirrorShardで編集する前にファイルのバックアップ（コピー）を作成しておくか、ファイル自身に作成日を書き記していただければ（「○○○○年○○月○○日作成」など）幸いです。  


Q. アイデアプロセッサで画面の表示がおかしくなりました。今までに作成したノード群が見えなくなっています。  

A. 何らかの不具合で画面描画や座標計算が狂い、ノードが画面外にいってしまったのかもしれません。お手数ですが、Iボタンで位置と拡大倍率をリセットしてみてください。  


Q. AIチャットでエラーが出ました。  

A. AIチャットで出現するエラーは多岐にわたるため、ここですべてを詳述することはできませんが、インターネットで検索すれば解決策が見つかることが多いと思います。  
たとえば[503 Service Unavailable]Model is overloaded.というエラーの場合はGoogleのサーバが一時的に過負荷状態で繋がらないだけ（時間をおいて再試行すれば繋がる可能性が高い）ですが、こうした情報は、エラーメッセージを検索すればある程度出てきます。  

Q. LANでLM Studioにつなごうと思ったのですが、出来ません。  

A. 申し訳ございませんが、現状ではlocalhost（http://127.0.0.1:1234）での起動にしか対応しておりません。  