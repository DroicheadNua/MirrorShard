# Changelog  

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [1.4.0] - 2025-11-XX  

### Added (新機能)  
- AIによる発想支援 (Chain of Thought): アイデアプロセッサでノードを選択し、`🧠`ボタンを押すことで、選択したノードから連想される3つの新しいアイデアをAIが提案する機能を追加しました。  
    - 使用できるAIは、  
    ・Google Gemini 2.5 pro（要APIキー）  
    ・任意のローカルAI（要LM Studio）  
    の2種類に対応。導入の詳細については「アイデアプロセッサ機能使用ガイド」を参照  
- 階層的アウトライン機能: アイデアプロセッサのアウトラインパネルが、各ノードの本文（contentText）に含まれる見出し（`###` および `####`）を認識し、より深い階層で表示できるようになりました。大規模なデータも、すっきりと俯瞰・管理できます。  
- ストーリー・アーキタイプ機能: アイデアプロセッサに、物語創作をガイドするテンプレート機能を追加しました (`A`ボタン、または`Ctrl+A`)。ボタンから以下の「物語の元型（Story Archetype）」を呼び出し、あなたのプロット構築を加速させることができます。詳細については「アイデアプロセッサ機能使用ガイド」を参照してください。  
    - Actantial model(行為者モデル)  
    - Hero's Journey(英雄の旅)  
    - Beat Sheet(エッセンシャル・ビートシート)
    - Three-Act Structure(三幕構成)
- 一括削除機能: アイデアプロセッサで範囲選択した複数のノードを、`Delete`キーで一度に削除できるようになりました。  

### Changed (変更点)  


### Fixed (修正点)  
- アイデアプロセッサで、アウトラインペインを開いたままファイルのロードまたは新規作成を行うと、アウトラインの内容が古いファイルのままになっていた不具合を修正。  

## [1.3.0] - 2025-10-26  

### Added (新機能)  
- アイデアプロセッサを搭載。詳細は「アイデアプロセッサ機能使用ガイド.md」を参照  
- スポットライトモードの追加: Ctrl+Lで、現在編集中の見出し（#）のセクションだけをハイライト表示する「スポットライトモード」を追加しました。  
- Scrivenerプロジェクトのインポート機能: 右クリックメニューから.scrivプロジェクトフォルダを直接インポートし、単一のマークダウンファイルとして展開できるようになりました。  
- テキストエリアを右側に寄せる機能を追加 (`Ctrl+Shift+D`)。  
  - 空いたスペースでアイデアプロセッサウィンドウなどを運用することを想定しています。  

### Changed (変更点)  
- サブウィンドウの挙動を改善:  
  - ショートカットキー一覧（F1）ウィンドウを非モーダルに
  - サブウィンドウの親子関係を修正  
  - 排他制御を廃止し、複数のサブウィンドウを同時に開けるように  
- 終了シーケンスの改善:  
  - 複数のウィンドウが開いている状態でアプリを終了しようとした際の確認プロセスを修正  
- メインエディタの「右寄せ」状態と、「アウトラインペイン」の表示状態を記憶し、次回起動時に復元するようにしました。  
- プレビューウィンドウの最前面表示を解除できるようにしました。  

### Fixed (修正点)  
- フルスクリーン状態の復元: フルスクリーン状態でアプリを終了し、再度起動した際にフルスクリーンが正しく復元されず、元のウィンドウサイズに戻れなくなる問題を修正  
- プレビューウィンドウのボタンの位置を修正  
- ショートカットキー一覧を表示したときのフリッカーを抑制  

## [1.2.1] - 2025-9-21  

### Fixed (修正点)  
- 改ページ記号（U+000C）が含まれるファイルをUNICODEと誤認するバグを修正。  
- 文字入力でTabキーが使えなかった問題を修正。  

## [1.2.0] - 2025-9-17  

### Added (新機能)  
- PC内の画像や音楽ファイルを読み込み、背景画像やBGMとして設定できるようになりました。  

### Changed (変更点)  
- 起動の高速化  

### Fixed (修正点)  

## [1.1.0] - 2025-9-13  

### Added (新機能)  
- **高度な設定画面 (F2)**: システムフォントの適用や、外部ツールのパス設定が可能になりました。  
  - PCにインストールされているシステムフォントをスキャンし、エディタに適用できます。  
  - スキャン結果はキャッシュされ、2回目以降の表示は高速です。  
  - 適用したシステムフォントは、次回起動時にも維持されます。  
- **エクスポート機能 (Ctrl+E)**: 執筆したテキストを、EPUB, PDF, HTML形式で出力できます。  
  - この機能には [Pandoc](https://pandoc.org/) のインストールが必要です。詳しくは導入ガイドを参照してください。  
  - 日本語の縦書き、青空文庫形式のルビ変換に対応。  
- **ステータスバーの機能拡張**:  
  - 現在のカーソル位置のアウトライン階層を「パンくずリスト」形式で表示します (`2024年 > 8月 > 8/15`)。  

### Changed (変更点)  
- **ファイル保存の安全性向上**: ファイル保存時に一時ファイルを利用する機能（アトミックセーブ）を実装。保存中のクラッシュなどによるデータ損失のリスクを低減しました。  
- **エンコード判定エンジンの刷新**: 文字コードの判定ライブラリを`jschardet`から、より高精度な`encoding-  japanese`に変更。Shift_JISやEUC-JPなどの判定精度が向上しました。  
- **エンコード警告システムの導入**: 自動判定に失敗する可能性があるファイルを読み込んだ際に、ユーザーに警告を表示し、安全な操作を促すようになりました。  

### Fixed (修正点)  
- 英文ファイルなどのエンコードを誤認するバグを修正。  
- バグ修正及びパフォーマンスの改善。  

## [1.0.0] - 2025-08-29  

- Initial release.  
